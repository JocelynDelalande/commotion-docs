\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler}{\section{commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler Class Reference}
\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler}\index{commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler@{commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler}}
}
Inheritance diagram for commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classcommotion__client_1_1utils_1_1logger_1_1LogHandler}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a505b62933baef8f074b615aad533d059}{def {\bfseries \+\_\+\+\_\+init\+\_\+\+\_\+}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a505b62933baef8f074b615aad533d059}

\item 
def \hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a1d1431f7384b19dc25e176361b7eeb23}{set\+\_\+logfile}
\item 
def \hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a3d76d342b09b2d51753751e5f64f48df}{set\+\_\+verbosity}
\item 
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_ac9b855879e61081132fae4067b330507}{def {\bfseries get\+\_\+logger}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_ac9b855879e61081132fae4067b330507}

\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a56e66bd2b61cd60a8ad0e093f34ca208}{{\bfseries logger}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a56e66bd2b61cd60a8ad0e093f34ca208}

\item 
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a0e8bffd460ab94f0e05bdc8a676d2c4f}{{\bfseries levels}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a0e8bffd460ab94f0e05bdc8a676d2c4f}

\item 
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_adbe12df7374590dd37a12eb84ee48a41}{{\bfseries formatter}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_adbe12df7374590dd37a12eb84ee48a41}

\item 
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a83d51d996fcf161a5b107a2589f96966}{{\bfseries stream}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a83d51d996fcf161a5b107a2589f96966}

\item 
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_afe5e88e544dd8855d6d1b52255e6d531}{{\bfseries file\+\_\+handler}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_afe5e88e544dd8855d6d1b52255e6d531}

\item 
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}{{\bfseries logfile}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Main logging controls for Commotion-Client. 

This application is ONLY to be called by the main application. This logger sets up the main namespace for all other logging to take place within. All other loggers should be the core string "commotion_client" and the packages __name__ to use inheretance from the main commotion package. This way the code in an indivdual extension will be small and will inheret the logging settings that were defined in the main application.

Example Use for ALL other modules and packages:

    from commotion-client.utils import logger
    log = logger.getLogger("commotion_client"+__name__)


NOTE: The exceptions in this function do not have translation implemented. This is that they are called before the QT application and, as such, are not pushed through QT's translation tools. This could be a mistake on the developers side, as he is a bit foggy on the specifics of QT translation. You can access the feature request at https://github.com/opentechinstitute/commotion-client/issues/24
\end{DoxyVerb}
 

\subsection{Member Function Documentation}
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a1d1431f7384b19dc25e176361b7eeb23}{\index{commotion\+\_\+client\+::utils\+::logger\+::\+Log\+Handler@{commotion\+\_\+client\+::utils\+::logger\+::\+Log\+Handler}!set\+\_\+logfile@{set\+\_\+logfile}}
\index{set\+\_\+logfile@{set\+\_\+logfile}!commotion\+\_\+client\+::utils\+::logger\+::\+Log\+Handler@{commotion\+\_\+client\+::utils\+::logger\+::\+Log\+Handler}}
\subsubsection[{set\+\_\+logfile}]{\setlength{\rightskip}{0pt plus 5cm}def commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+set\+\_\+logfile (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{logfile = {\ttfamily None}}
\end{DoxyParamCaption}
)}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a1d1431f7384b19dc25e176361b7eeb23}
\begin{DoxyVerb}Set the file to log to.

Args:
logfile (string): The absolute path to the file to log to.
  optional: defaults to the default system logfile path.
\end{DoxyVerb}
 

References commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+logfile.


\begin{DoxyCode}
60 
61     \textcolor{keyword}{def }\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a1d1431f7384b19dc25e176361b7eeb23}{set\_logfile}(self, logfile=None):
62         \textcolor{stringliteral}{"""Set the file to log to.}
63 \textcolor{stringliteral}{        }
64 \textcolor{stringliteral}{        Args:}
65 \textcolor{stringliteral}{        logfile (string): The absolute path to the file to log to.}
66 \textcolor{stringliteral}{          optional: defaults to the default system logfile path.}
67 \textcolor{stringliteral}{        """}
68         \textcolor{keywordflow}{if} logfile:
69             log\_dir = QtCore.QDir(os.path.dirname(logfile))
70             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} log\_dir.exists():
71                 \textcolor{keywordflow}{if} log\_dir.mkpath(log\_dir.absolutePath()):
72                     self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}{logfile} = logfile
73         platform = sys.platform
74         \textcolor{keywordflow}{if} platform == \textcolor{stringliteral}{'darwin'}:
75             \textcolor{comment}{#Try <user>/Library/Logs first}
76             log\_dir = QtCore.QDir(os.path.join(QtCore.QDir.homePath(), \textcolor{stringliteral}{"Library"}, \textcolor{stringliteral}{"Logs"}))
77             \textcolor{comment}{#if it does not exist try and create it}
78             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} log\_dir.exists():
79                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} log\_dir.mkpath(log\_dir.absolutePath()):
80                     \textcolor{keywordflow}{raise} NotADirectoryError(\textcolor{stringliteral}{"Attempted to set logging to the user's Commotion directory.
       The directory '<home>/.Commotion' does not exist and could not be created."})
81             self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}{logfile} = log\_dir.filePath(\textcolor{stringliteral}{"commotion.log"})
82         \textcolor{keywordflow}{elif} platform \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'win32'}, \textcolor{stringliteral}{'cygwin'}]:
83             \textcolor{comment}{#Try ../AppData/Local/Commotion first}
84             log\_dir = QtCore.QDir(os.path.join(os.getenv(\textcolor{stringliteral}{'APPDATA'}), \textcolor{stringliteral}{"Local"}, \textcolor{stringliteral}{"Commotion"}))
85             \textcolor{comment}{#if it does not exist try and create it}
86             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} log\_dir.exists():
87                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} log\_dir.mkpath(log\_dir.absolutePath()):
88                     \textcolor{keywordflow}{raise} NotADirectoryError(\textcolor{stringliteral}{"Attempted to set logging to the user's Commotion directory.
       The directory '<home>/.Commotion' does not exist and could not be created."})
89             self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}{logfile} = log\_dir.filePath(\textcolor{stringliteral}{"commotion.log"})
90         \textcolor{keywordflow}{elif} platform == \textcolor{stringliteral}{'linux'}:
91             \textcolor{comment}{#Try /var/logs/}
92             log\_dir = QtCore.QDir(\textcolor{stringliteral}{"/var/logs/"})
93             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} log\_dir.exists(): \textcolor{comment}{#Seriously! What kind of twisted linux system is this?}
94                 \textcolor{keywordflow}{if} log\_dir.mkpath(log\_dir.absolutePath()):
95                     self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}{logfile} = log\_dir.filePath(\textcolor{stringliteral}{"commotion.log"})
96                 \textcolor{keywordflow}{else}:
97                     \textcolor{comment}{#If fail then just write logs in home directory}
98                     \textcolor{comment}{#TODO check if this is appropriate... its not.}
99                     home = QtCore.QDir.home()
100                     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} home.exists(\textcolor{stringliteral}{".Commotion"}) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} home.mkdir(\textcolor{stringliteral}{".Commotion"}):
101                         \textcolor{keywordflow}{raise} NotADirectoryError(\textcolor{stringliteral}{"Attempted to set logging to the user's Commotion
       directory. The directory '\{0\}/.Commotion' does not exist and could not be created."}.format(home.absolutePath()))
102                     \textcolor{keywordflow}{else}:
103                         home.cd(\textcolor{stringliteral}{".Commotion"})
104                         self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}{logfile} = home.filePath(\textcolor{stringliteral}{"commotion.log"})
105             \textcolor{keywordflow}{else}:
106                 self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}{logfile} = log\_dir.filePath(\textcolor{stringliteral}{"commotion.log"})
107         \textcolor{keywordflow}{else}:
108             \textcolor{comment}{#I'm out!}
109             \textcolor{keywordflow}{raise} OSError(\textcolor{stringliteral}{"Could not create a logfile."})

\end{DoxyCode}
\hypertarget{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a3d76d342b09b2d51753751e5f64f48df}{\index{commotion\+\_\+client\+::utils\+::logger\+::\+Log\+Handler@{commotion\+\_\+client\+::utils\+::logger\+::\+Log\+Handler}!set\+\_\+verbosity@{set\+\_\+verbosity}}
\index{set\+\_\+verbosity@{set\+\_\+verbosity}!commotion\+\_\+client\+::utils\+::logger\+::\+Log\+Handler@{commotion\+\_\+client\+::utils\+::logger\+::\+Log\+Handler}}
\subsubsection[{set\+\_\+verbosity}]{\setlength{\rightskip}{0pt plus 5cm}def commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+set\+\_\+verbosity (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{verbosity = {\ttfamily None}, }
\item[{}]{log\+\_\+type = {\ttfamily None}}
\end{DoxyParamCaption}
)}}\label{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a3d76d342b09b2d51753751e5f64f48df}
\begin{DoxyVerb}Set's the verbosity of the logging for the application.

Args:
  verbosity (string|int): The verbosity level for logging to take place.
    optional: Defaults to "Error" level
  log_type (string): The type of logging whose verbosity is to be changed.
    optional: If not specified ALL logging types will be changed.

Returns:
  bool True if successful, False if failed

Raises:
exception: Description.\end{DoxyVerb}
 

References commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+file\+\_\+handler, commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+formatter, commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+levels, commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+logfile, commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+logger, commotion\+\_\+client.\+commotion\+\_\+client.\+Commotion\+Client\+Application.\+logger, and commotion\+\_\+client.\+utils.\+logger.\+Log\+Handler.\+stream.


\begin{DoxyCode}
110 
111     \textcolor{keyword}{def }\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a3d76d342b09b2d51753751e5f64f48df}{set\_verbosity}(self, verbosity=None, log\_type=None):
112         \textcolor{stringliteral}{"""Set's the verbosity of the logging for the application.}
113 \textcolor{stringliteral}{        }
114 \textcolor{stringliteral}{        Args:}
115 \textcolor{stringliteral}{          verbosity (string|int): The verbosity level for logging to take place.}
116 \textcolor{stringliteral}{            optional: Defaults to "Error" level}
117 \textcolor{stringliteral}{          log\_type (string): The type of logging whose verbosity is to be changed.}
118 \textcolor{stringliteral}{            optional: If not specified ALL logging types will be changed.}
119 \textcolor{stringliteral}{        }
120 \textcolor{stringliteral}{        Returns:}
121 \textcolor{stringliteral}{          bool True if successful, False if failed}
122 \textcolor{stringliteral}{        }
123 \textcolor{stringliteral}{        Raises:}
124 \textcolor{stringliteral}{        exception: Description.}
125 \textcolor{stringliteral}{        }
126 \textcolor{stringliteral}{        """}
127         \textcolor{keywordflow}{try}:
128             int\_level = int(verbosity)
129         \textcolor{keywordflow}{except} ValueError:
130             \textcolor{keywordflow}{if} str(verbosity).upper() \textcolor{keywordflow}{in} self.levels.keys():
131                 level = self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a0e8bffd460ab94f0e05bdc8a676d2c4f}{levels}[str(verbosity).upper()]
132             \textcolor{keywordflow}{else}:
133                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}
134         \textcolor{keywordflow}{else}:
135             \textcolor{keywordflow}{if} 1 <= int\_level <= 5:
136                 \_levels = [ \textcolor{stringliteral}{'CRITICAL'}, \textcolor{stringliteral}{'ERROR'}, \textcolor{stringliteral}{'WARN'}, \textcolor{stringliteral}{'INFO'}, \textcolor{stringliteral}{'DEBUG'}]
137                 level = self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a0e8bffd460ab94f0e05bdc8a676d2c4f}{levels}[\_levels[int\_level-1]]
138             \textcolor{keywordflow}{else}:
139                 \textcolor{keywordflow}{return} \textcolor{keyword}{False}
140                 
141         \textcolor{keywordflow}{if} log\_type == \textcolor{stringliteral}{"stream"}:
142             set\_stream = \textcolor{keyword}{True}
143         \textcolor{keywordflow}{elif} log\_type == \textcolor{stringliteral}{"logfile"}:
144             set\_logfile = \textcolor{keyword}{True}
145         \textcolor{keywordflow}{else}:
146             set\_logfile = \textcolor{keyword}{True}
147             set\_stream = \textcolor{keyword}{True}
148 
149         \textcolor{keywordflow}{if} set\_stream == \textcolor{keyword}{True}:
150             self.logger.removeHandler(self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a83d51d996fcf161a5b107a2589f96966}{stream})
151             self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a83d51d996fcf161a5b107a2589f96966}{stream} = \textcolor{keywordtype}{None}
152             self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a83d51d996fcf161a5b107a2589f96966}{stream} = logging.StreamHandler()
153             self.stream.setFormatter(self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_adbe12df7374590dd37a12eb84ee48a41}{formatter})
154             self.stream.setLevel(level)
155             self.logger.addHandler(self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a83d51d996fcf161a5b107a2589f96966}{stream})
156         \textcolor{keywordflow}{if} set\_logfile == \textcolor{keyword}{True}:
157             self.logger.removeHandler(self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_afe5e88e544dd8855d6d1b52255e6d531}{file\_handler})
158             self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_afe5e88e544dd8855d6d1b52255e6d531}{file\_handler} = \textcolor{keywordtype}{None}
159             self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_afe5e88e544dd8855d6d1b52255e6d531}{file\_handler} = handlers.RotatingFileHandler(self.
      \hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_a92d313ddde96b6e1765514f4596f26f2}{logfile},
160                                                             maxBytes=5000000,
161                                                             backupCount=5)
162             self.file\_handler.setFormatter(self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_adbe12df7374590dd37a12eb84ee48a41}{formatter})
163             self.file\_handler.setLevel(level)
164             self.logger.addHandler(self.\hyperlink{classcommotion__client_1_1utils_1_1logger_1_1LogHandler_afe5e88e544dd8855d6d1b52255e6d531}{file\_handler})
165         \textcolor{keywordflow}{return} \textcolor{keyword}{True}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
commotion\+\_\+client/utils/logger.\+py\end{DoxyCompactItemize}
