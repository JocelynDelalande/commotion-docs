\hypertarget{plugin_8h}{\section{src/plugin.h File Reference}
\label{plugin_8h}\index{src/plugin.\-h@{src/plugin.\-h}}
}


The commotiond plugin loader.  


{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include \char`\"{}obj.\-h\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structco__plugin__t}{co\-\_\-plugin\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{plugin_8h_ab602bc6551921eca42d690913041213e}{typedef struct \hyperlink{structco__plugin__t}{co\-\_\-plugin\-\_\-t} {\bfseries co\-\_\-plugin\-\_\-t}}\label{plugin_8h_ab602bc6551921eca42d690913041213e}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{plugin_8h_a761244c10bb3a3a34aa7dc927fa7868d}{struct \hyperlink{structco__plugin__t}{co\-\_\-plugin\-\_\-t} {\bfseries \-\_\-\-\_\-attribute\-\_\-\-\_\-} ((packed))}\label{plugin_8h_a761244c10bb3a3a34aa7dc927fa7868d}

\item 
\hypertarget{plugin_8h_a301bfa21e7d6abdbe460cb111c51cf04}{int \hyperlink{plugin_8h_a301bfa21e7d6abdbe460cb111c51cf04}{co\-\_\-plugins\-\_\-shutdown} (void)}\label{plugin_8h_a301bfa21e7d6abdbe460cb111c51cf04}

\begin{DoxyCompactList}\small\item\em shuts down and closes all plugins \end{DoxyCompactList}\item 
\hypertarget{plugin_8h_a263c376dbbf53d37087ae611bd403f85}{int \hyperlink{plugin_8h_a263c376dbbf53d37087ae611bd403f85}{co\-\_\-plugins\-\_\-start} (void)}\label{plugin_8h_a263c376dbbf53d37087ae611bd403f85}

\begin{DoxyCompactList}\small\item\em starts all loaded plugins \end{DoxyCompactList}\item 
int \hyperlink{plugin_8h_a532e7a11be4beacd27d4d8e3a4c06944}{co\-\_\-plugins\-\_\-init} (size\-\_\-t index\-\_\-size)
\begin{DoxyCompactList}\small\item\em initializes global plugin list \end{DoxyCompactList}\item 
int \hyperlink{plugin_8h_a61e497614e5af8d009a76709c91b34d8}{co\-\_\-plugins\-\_\-load} (const char $\ast$dir\-\_\-path)
\begin{DoxyCompactList}\small\item\em loads all plugins in specified path \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{plugin_8h_aa20afbf3f0a782bb4dea4da22df275a3}{\hyperlink{structco__obj__t}{co\-\_\-obj\-\_\-t} {\bfseries \-\_\-header}}\label{plugin_8h_aa20afbf3f0a782bb4dea4da22df275a3}

\item 
\hypertarget{plugin_8h_a05de11e79f277be86c869a1fc6a204bd}{uint8\-\_\-t {\bfseries \-\_\-exttype}}\label{plugin_8h_a05de11e79f277be86c869a1fc6a204bd}

\item 
\hypertarget{plugin_8h_a5ff8177a0b8e2c9f9c18bd0cb34e65f8}{uint8\-\_\-t {\bfseries \-\_\-len}}\label{plugin_8h_a5ff8177a0b8e2c9f9c18bd0cb34e65f8}

\item 
\hyperlink{structco__obj__t}{co\-\_\-obj\-\_\-t} $\ast$ \hyperlink{plugin_8h_a842efb72cde7678fc8a8162084b327ea}{name}
\item 
\hypertarget{plugin_8h_a0f6f853c23a173e66e7f8e610f87969f}{\hyperlink{structco__obj__t}{co\-\_\-obj\-\_\-t} $\ast$ {\bfseries filename}}\label{plugin_8h_a0f6f853c23a173e66e7f8e610f87969f}

\item 
\hypertarget{plugin_8h_aeb71d07761c7949d25061c1dba617034}{co\-\_\-cb\-\_\-t {\bfseries shutdown}}\label{plugin_8h_aeb71d07761c7949d25061c1dba617034}

\item 
\hypertarget{plugin_8h_a12c1d8bf180e969cd50508625e2c2340}{co\-\_\-cb\-\_\-t {\bfseries init}}\label{plugin_8h_a12c1d8bf180e969cd50508625e2c2340}

\item 
\hypertarget{plugin_8h_a81011b79683fab64ce3aff71114f8fdd}{void $\ast$ {\bfseries handle}}\label{plugin_8h_a81011b79683fab64ce3aff71114f8fdd}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
The commotiond plugin loader. \begin{DoxyAuthor}{Author}
Josh King (jheretic), \href{mailto:jking@chambana.net}{\tt jking@chambana.\-net} 
\end{DoxyAuthor}


\subsection{Function Documentation}
\hypertarget{plugin_8h_a532e7a11be4beacd27d4d8e3a4c06944}{\index{plugin.\-h@{plugin.\-h}!co\-\_\-plugins\-\_\-init@{co\-\_\-plugins\-\_\-init}}
\index{co\-\_\-plugins\-\_\-init@{co\-\_\-plugins\-\_\-init}!plugin.h@{plugin.\-h}}
\subsubsection[{co\-\_\-plugins\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int co\-\_\-plugins\-\_\-init (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{index\-\_\-size}
\end{DoxyParamCaption}
)}}\label{plugin_8h_a532e7a11be4beacd27d4d8e3a4c06944}


initializes global plugin list 


\begin{DoxyParams}{Parameters}
{\em index\-\_\-size} & specifies size of index for plugins list (16 or 32 bit) \\
\hline
\end{DoxyParams}


References co\-\_\-plugins\-\_\-shutdown().



Referenced by main().


\begin{DoxyCode}
95 \{
96   \textcolor{keywordflow}{if}(index\_size == 16)
97   \{
98     CHECK((\_plugins = (\hyperlink{structco__obj__t}{co\_obj\_t} *)co\_list16\_create()) != NULL, \textcolor{stringliteral}{"Plugin list creation failed."});
99   \}
100   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(index\_size == 32)
101   \{
102     CHECK((\_plugins = (\hyperlink{structco__obj__t}{co\_obj\_t} *)co\_list32\_create()) != NULL, \textcolor{stringliteral}{"Plugin list creation failed."});
103   \}
104   \textcolor{keywordflow}{else} SENTINEL(\textcolor{stringliteral}{"Invalid list index size."});
105 
106   \textcolor{keywordflow}{return} 1;
107 
108 error:
109   \hyperlink{plugin_8c_a301bfa21e7d6abdbe460cb111c51cf04}{co\_plugins\_shutdown}();
110   \textcolor{keywordflow}{return} 0;
111 \}
\end{DoxyCode}
\hypertarget{plugin_8h_a61e497614e5af8d009a76709c91b34d8}{\index{plugin.\-h@{plugin.\-h}!co\-\_\-plugins\-\_\-load@{co\-\_\-plugins\-\_\-load}}
\index{co\-\_\-plugins\-\_\-load@{co\-\_\-plugins\-\_\-load}!plugin.h@{plugin.\-h}}
\subsubsection[{co\-\_\-plugins\-\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}int co\-\_\-plugins\-\_\-load (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{dir\-\_\-path}
\end{DoxyParamCaption}
)}}\label{plugin_8h_a61e497614e5af8d009a76709c91b34d8}


loads all plugins in specified path 


\begin{DoxyParams}{Parameters}
{\em dir\-\_\-path} & directory to load plugins from \\
\hline
\end{DoxyParams}


References process\-\_\-files().



Referenced by main().


\begin{DoxyCode}
153                                           \{
154   \textcolor{keywordflow}{return} \hyperlink{util_8c_a7f3fbaf6ce8bc88138b3879ac4d7e696}{process\_files}(dir\_path, \_co\_plugins\_load\_i);
155 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{plugin_8h_a842efb72cde7678fc8a8162084b327ea}{\index{plugin.\-h@{plugin.\-h}!name@{name}}
\index{name@{name}!plugin.h@{plugin.\-h}}
\subsubsection[{name}]{\setlength{\rightskip}{0pt plus 5cm}{\bf co\-\_\-obj\-\_\-t}$\ast$ name}}\label{plugin_8h_a842efb72cde7678fc8a8162084b327ea}
command name 